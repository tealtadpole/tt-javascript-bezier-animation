<html>
    <head>
        <title>tt-bezier-animation demo</title>
        <link rel="stylesheet" href="main.css">
        <script defer src="index.js"></script>
        <script defer src="dataset.js"></script>
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">  
    </head>
    <body>
        <div class="container">
            <h1>Bezier animation demo</h1>
            <div class="card-container">
                <div class="card">
                    <div id="animation1container" class="animation-container">
                        <div id="circle1" class="circle"></div>
                    </div>
                    <button onclick="startAnimation(1)">Start animation</button>
                    <button onclick="stopAnimation(1)">Stop animation</button>
                    <p>bezier degree 3 with 1 second duration </p>
                    <pre class="pre-code">
    {
        name: 'animation1',
        containerId: 'animation1container',
        childId: 'circle1',
        childOrigin: 'center',
        degree: 3,
        points: [{
            x: 0,
            y: 0
        }, {
            x: 1,
            y: 0
        }, {
            x: 1,
            y: 1
        }, {
            x: 0,
            y: 1
        }],
        loop: false,
        duration: 1000
    }
                    </pre>
                </div>
                <div class="card">
                    <div id="animation2container" class="animation-container">
                        <div id="circle2" class="circle"></div>
                    </div>
                    <button onclick="startAnimation(2)">Start animation</button>
                    <button onclick="stopAnimation(2)">Stop animation</button>
                    <p>bezier degree 3 with 2 seconds duration forming a circle (looped)</p>
        <pre class="pre-code">
    {
        name: 'animation2',
        containerId: 'animation2container',
        childId: 'circle2',
        childOrigin: 'center',
        degree: 3,
        points: [{
            x: 0.5,
            y: 0
        }, {
            x: 0,
            y: 1
        }, {
            x: 1,
            y: 1
        }, {
            x: 0.5,
            y: 0
        }],
        loop: true,
        duration: 2000
    }
        </pre>
                </div>
                <div class="card">
                    <div id="animation3container" class="animation-container">
                        <div id="circle3" class="circle"></div>
                    </div>
                    <button onclick="startAnimation(3)">Start animation</button>
                    <button onclick="stopAnimation(3)">Stop animation</button>
                    <p>autostart, bezier degree 3 with points outside 'normalized' square</p>
<pre class="pre-code">
    {
        name: 'animation3',
        containerId: 'animation3container',
        childId: 'circle3',
        childOrigin: 'center',
        degree: 3,
        points: [{
            x: -1,
            y: 0.75
        }, {
            x: 4,
            y: 0.5
        }, {
            x: -3,
            y: 0.25
        }, {
            x: 2,
            y: 0.25
        }],
        loop: true,
        run: true,
        duration: 1000
    }
</pre>
                </div>
                <div class="card">
                    <div id="animation4container" class="animation-container">
                        <img id="circle4" class="coin" src="spinning-coin.gif">
                    </div>
                    <button onclick="startAnimation(4)">Start animation</button>
                    <button onclick="stopAnimation(4)">Stop animation</button>
                    <p>bezier degree 2 with spinning coin image, <a href="https://www.google.com/search?q=transparent+spinning+coin+gif&tbm=isch&hl=en&chips=q:transparent+spinning+coin+gif,online_chips:insert+coin:Uoa82RFpo28%3D&rlz=1C1CHBD_enDE928HK929&sa=X&ved=2ahUKEwielY7U0pn0AhW4ATQIHZrLCyMQ4lYoAXoECAEQFA&biw=1814&bih=1013#imgrc=RhWAOkD5yxZMwM">img source</a></p>
<pre class="pre-code">
    {
        name: 'animation4',
        containerId: 'animation4container',
        childId: 'circle4',
        childOrigin: 'center',
        degree: 2,
        points: [{
            x: 0.5,
            y: 0.5
        }, {
            x: 0.5,
            y: 1.5
        }, {
            x: 0.5,
            y: 0
        }],
        loop: false,
        run: false,
        duration: 500,
        hideOnAnimationEnd: true
    }
</pre>
                </div>
            </div>
            <h2>With easing examples</h2>
            <div class="card-container">
                <div class="card">
                    <div id="animation5container" class="animation-container">
                        <img id="circle5" class="coin" src="spinning-coin.gif">
                    </div>
                    <button onclick="startAnimation(5)">Start animation</button>
                    <button onclick="stopAnimation(5)">Stop animation</button>
                    <p><span class="code">easeOutBounce</span> easing</p>    
                    <pre class="pre-code">
    {
        name: 'animation5',
        containerId: 'animation5container',
        childId: 'circle5',
        childOrigin: 'bottom',
        degree: 1,
        points: [{
            x: 0.5,
            y: 1
        }, {
            x: 0.5,
            y: 0
        }],
        loop: true,
        easing: 'easeOutBounce',
        run: true,
        duration: 1000,
        hideOnAnimationEnd: false
    }
                    </pre>
                </div>
                <div class="card">
                    <div id="animation6container" class="animation-container">
                        <img id="circle6" class="coin" src="spinning-coin.gif">
                    </div>
                    <button onclick="startAnimation(6)">Start animation</button>
                    <button onclick="stopAnimation(6)">Stop animation</button>
                    <p><span class="code">easeInOutCubic</span> easing</p>    
                    <pre class="pre-code">
    {
        name: 'animation6',
        containerId: 'animation6container',
        childId: 'circle6',
        childOrigin: 'right',
        degree: 1,
        points: [{
            x: 0,
            y: 0.5
        }, {
            x: 1,
            y: 0.5
        }],
        loop: true,
        easing: 'easeInOutCubic',
        run: true,
        duration: 1000,
        hideOnAnimationEnd: true
    }
                    </pre>
                </div>
            </div>
            <div class="readme">
                <h2>Github repository:</h2>
                <ul>
                    <li><a href="https://github.com/tealtadpole/tt-javascript-bezier-animation">https://github.com/tealtadpole/tt-javascript-bezier-animation</a></li>
                </ul>
                <h3>Live example:</h3>
                <ul>
                    <li><a href="https://web.tealtadpole.me/tt-javascript-bezier-animation/">https://web.tealtadpole.me/tt-javascript-bezier-animation/</a></li>
                </ul>
                <h3>Original blog article:</h3>
                <ul>
                    <li>
                        <a href="https://tealtadpole.me/index.php/2021/11/16/javascript-bezier-animation-library">https://tealtadpole.me/index.php/2021/11/16/javascript-bezier-animation-library</a>
                    </li>
                </ul>
                <h3>Usage:</h3>
                <ol>
                    <li>import the library</li>
                    <li>Prepare the container tag and the child tag. (Container is where the animated DOM id located, it must have at least positioning relative/absolute, normally it should have a width and height. Child tag is the DOM id that will be animated)</li>
                    <li><span class="code">ttBezier.add(options)</span> - add the animation into the library with the configuration</li>
                    <li><span class="code">ttBezier.start(name)</span> to start the animation</li>
                    <li><span class="code">ttBezier.stop(name)</span> - to stop the animation</li>
                </ol>
                <h3>Options</h3>
                    <table cellspacing=0>
                        <thead>
                            <tr>
                                <th>option</th>
                                <th>type</th>
                                <th>description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>name</td>
                                <td>string</td>
                                <td>Animation name</td>
                            </tr>
                            <tr>
                                <td>containerId</td>
                                <td>string</td>
                                <td>Animation container DOM id</td>
                            </tr>
                            <tr>
                                <td>childId</td>
                                <td>string</td>
                                <td>Animated element DOM id</td>
                            </tr>
                            <tr>
                                <td>childOrigin</td>
                                <td>string (optional, default 'top-left')</td>
                                <td>Center animated element <a href="#childOrigin">origin</a></td>
                            </tr>
                            <tr>
                                <td>degree</td>
                                <td>number (optional, defaut 3)</td>
                                <td>Bezier degree, starting from 1 (linear line)</td>
                            </tr>
                            <tr>
                                <td>points</td>
                                <td>Array [{x: __ , y: __ }]</td>
                                <td>Array of points</td>
                            </tr>
                            <tr>
                                <td>duration</td>
                                <td>number (int milliseconds)</td>
                                <td>Animation duration</td>
                            </tr>
                            <tr>
                                <td>easing</td>
                                <td>string</td>
                                <td><a href="#easing">Easing type</a></td>
                            </tr>
                            <tr>
                                <td>loop</td>
                                <td>boolean</td>
                                <td>Looped animation</td>
                            </tr>
                            <tr>
                                <td>hideOnAnimationEnd</td>
                                <td>boolean</td>
                                <td>Hide the child when the animation ends (with <span class="code">display=none</span>)</td>
                            </tr>
                            <tr>
                                <td>run</td>
                                <td>boolean</td>
                                <td>Run the animation immediately</td>
                            </tr>
                        </tbody>
                    </table>
                <h3 id="childOrigin">childOrigin list</h3>
                <p>Possible <span class="code">childOrigin</span> as follows:</p>
                <ul>
                    <li>top-left</li>
                    <li>top</li>
                    <li>top-right</li>
                    <li>left</li>
                    <li>center</li>
                    <li>right</li>
                    <li>bottom-left</li>
                    <li>bottom</li>
                    <li>bottom-right</li>
                </ul>
                <h3 id="easing">Easing list</h3>
                <p>I use the easing functions from <a href="https://easings.net/">easings.net</a>, the list as follows:</p>
                <ul>
                    <li>easeInSine</li>
                    <li>easeOutSine</li>
                    <li>easeInOutSine</li>
                    <li>easeInQuad</li>
                    <li>easeOutQuad</li>
                    <li>easeInOutQuad</li>
                    <li>easeInCubic</li>
                    <li>easeOutCubic</li>
                    <li>easeInOutCubic</li>
                    <li>easeInQuart</li>
                    <li>easeOutQuart</li>
                    <li>easeInOutQuart</li>
                    <li>easeInQuint</li>
                    <li>easeOutQuint</li>
                    <li>easeInOutQuint</li>
                    <li>easeInExpo</li>
                    <li>easeOutExpo</li>
                    <li>easeInOutExpo</li>
                    <li>easeInCirc</li>
                    <li>easeOutCirc</li>
                    <li>easeInOutCirc</li>
                    <li>easeInBack</li>
                    <li>easeOutBack</li>
                    <li>easeInOutBack</li>
                    <li>easeInElastic</li>
                    <li>easeOutElastic</li>
                    <li>easeInOutElastic</li>
                    <li>easeInBounce</li>
                    <li>easeOutBounce</li>
                </ul>
                <h3>Notes</h3>
                <ul>
                    <li>Make sure to set the <span class="code">position</span>'s attribute of the container element as <span class="code">relative</span> or <span class="code">absolute</span> to make it work</li>
                    <li>This library can draw any number of bezier degree, not limited only to cubic bezier</li>
                </ul>
                <h3>Bezier Functions</h3>
                <p>Here are my bezier functions (I used <a href="https://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm">de Casteljau's algorithm</a>) </p>
                <pre class="pre-code">

    static bezier(degree, points, t) {
        const newPoints = []
        for (let i=0; i &lt; degree; i++) {
            let newPoint = ttBezier.linearFunction(points[i].x, points[i+1].x, points[i].y, points[i+1].y, t)
            newPoints.push(newPoint)
        }
        if (newPoints.length === 1) {
            return newPoints[0]
        } else {
            return ttBezier.bezier(degree - 1, newPoints, t)
        }
    }

    static linearFunction(x1, x2, y1, y2, t) {
        let x = (1 - t) * x1 + t * x2
        let y = (1 - t) * y1 + t * y2
        return { x, y } 
    }

                </pre>
            </div>
        </div>
        <footer>&copy; <a href="https://tealtadpole.me">tealtadpole.me</a></footer>
        <script>
            window.onload = () => {
                for(let i=0; i<6; i++) {
                    ttBezier.add(dataset[i])
                }
            }
            function startAnimation(id) {
                ttBezier.start(`animation${id}`)
            }
            function stopAnimation(id) {
                ttBezier.stop(`animation${id}`)
            }
        </script>
    </body>
</html>